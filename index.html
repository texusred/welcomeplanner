<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Staff Rota & Stallholder Manager | UNION</title>
    <link rel="stylesheet" href="styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&display=swap" rel="stylesheet">
    <meta name="description" content="Staff schedules and stallholder management for UNION events">
    <meta name="theme-color" content="#D7FB59">
    <link rel="manifest" href="manifest.json">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="Union Staff">
</head>
<body>
    <header class="header">
        <div class="header-content">
            <div class="logo">
                <img src="assets/images/unionlogo.png" alt="UNION" class="union-logo-img">
                <h1 class="page-title">Staff Rota & Event Management</h1>
            </div>
            <div class="header-controls">
                <button id="refreshDataBtn" class="refresh-btn" type="button">
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <polyline points="23 4 23 10 17 10"></polyline>
                        <polyline points="1 20 1 14 7 14"></polyline>
                        <path d="M20.49 9A9 9 0 0 0 5.64 5.64L1 10m22 4l-4.64 4.36A9 9 0 0 1 3.51 15"></path>
                    </svg>
                    <span>Refresh</span>
                </button>
                <div class="current-time">
                    Current Time: <span id="currentTime">--:--</span>
                </div>
            </div>
        </div>
    </header>

    <main class="main-content">
        <section class="staff-rota-section">
            <div class="section-header">
                <h2>Staff Rota</h2>
                <p>Live staff schedules and locations</p>
            </div>
            <div class="section-content">
                <div class="search-interface">
                    <div class="search-group">
                        <label for="staffSearch">Search Staff</label>
                        <input type="text" id="staffSearch" class="search-input" placeholder="Enter staff member name...">
                    </div>
                    <div class="search-group">
                        <label for="locationFilter">Filter by Location</label>
                        <select id="locationFilter" class="search-select">
                            <option value="">All Locations</option>
                            <option value="Ruskin Courtyard">Ruskin Courtyard</option>
                            <option value="LAB Courtyard">LAB Courtyard</option>
                            <option value="Science Walkway">Science Walkway</option>
                        </select>
                    </div>
                </div>
                
                <div class="results-area" id="staffResults">
                    <div class="results-placeholder">
                        <span class="placeholder-icon">üë•</span>
                        <h3>Staff Search</h3>
                        <p>Search for staff members or filter by location to view schedules</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- NEW: Standalone Map Section -->
        <section class="map-section">
            <div class="section-header">
                <h2>Location Maps</h2>
                <p>Interactive venue maps</p>
            </div>
            <div class="section-content">
                <div class="map-viewer-section">
                    <div class="map-viewer-header">
                        <h3>View Maps</h3>
                        <p>Quick access to location maps</p>
                    </div>
                    <div class="map-viewer-content">
                        <div class="map-buttons">
                            <button class="map-btn" onclick="openMap('ruskin-courtyard')">
                                üåø Ruskin Courtyard
                            </button>
                            <button class="map-btn" onclick="openMap('science-walkway')">
                                üî¨ Science Walkway
                            </button>
                            <button class="map-btn" onclick="openMap('lab-courtyard')">
                                ‚òÇÔ∏è LAB Courtyard
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <aside class="stallholder-section">
            <div class="stallholder-card">
                <div class="stallholder-header">
                    <h3>Stallholder Search</h3>
                    <p>Find stall locations</p>
                </div>
                <div class="stallholder-content">
                    <input type="text" id="stallholderSearch" class="stallholder-search" placeholder="Search stallholders...">
                    <div class="stallholder-actions">
                        <button id="listAllStallholders" class="btn btn-secondary">List All</button>
                    </div>
                    <div class="stallholder-results" id="stallholder-results">
                        <div class="results-placeholder">
                            <div class="placeholder-icon">üè™</div>
                            <p>Type to search stallholders or view complete list</p>
                        </div>
                        <!-- Map section removed from here -->
                    </div>
                </div>
            </div>

            <div class="stallholder-card">
                <div class="stallholder-header">
                    <h3>Management</h3>
                    <p>Admin tools</p>
                </div>
                <div class="stallholder-content">
                    <div class="edit-access">
                        <p>Access stallholder editing tools and data management</p>
                        <button id="editStallholdersBtn" class="btn-edit">Edit Stallholders</button>
                    </div>
                </div>
            </div>
        </aside>
    </main>

    <div id="stallModal" class="modal">
        <div class="modal-overlay">
            <div class="modal-content">
                <div class="modal-header">
                    <h3 id="modalStallName">Stallholder Name</h3>
                    <button class="modal-close" onclick="closeModal()">&times;</button>
                </div>
                <div class="modal-body">
                    <div class="modal-info">
                        <div class="info-item">
                            <label>Stall Number:</label>
                            <span id="modalStallNumber">-</span>
                        </div>
                        <div class="info-item">
                            <label>Location:</label>
                            <span id="modalStallLocation">-</span>
                        </div>
                        <div class="info-item">
                            <label>Group:</label>
                            <span id="modalStallGroup">-</span>
                        </div>
                    </div>
                    <div class="modal-actions">
                        <button id="viewOnMapBtn" class="btn btn-primary">View on Map</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Map Modal -->
    <div id="mapModal" class="map-modal">
        <div class="map-modal-close" onclick="closeMap()">&times;</div>
        <img id="modalImage" src="" alt="Map">
    </div>

    <!-- Loading Indicator -->
    <div id="loadingIndicator" class="loading" style="display: none;">
        <div class="loading-spinner"></div>
        <p>Loading data...</p>
    </div>

    <!-- Toast Container -->
    <div id="toastContainer" class="toast-container"></div>

    <!-- Version Footer -->
    <footer id="versionFooter" class="version-footer">
        <div class="version-info">
            <span class="app-version">v3.7.0</span>
            <span class="separator">‚Ä¢</span>
            <span class="last-updated">Updated: --</span>
            <span class="separator">‚Ä¢</span>
            <span class="sw-status">Service Worker: Checking...</span>
        </div>
    </footer>

    <script src="script.js"></script>
</body>
</html>
